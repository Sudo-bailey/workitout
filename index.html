<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Okta Authentication</title>
    <script src="https://global.oktacdn.com/okta-auth-js/5.3.1/okta-auth-js.min.js"></script>
</head>
<body>
    <h1>Okta Authentication</h1>
    <button id="login">Login</button>
    <button id="logout" style="display: none;">Logout</button>
    <script>
        const oktaAuth = new OktaAuth({
            clientId: 'G7WD2Bd5rbZcosnoy8ux0UP8qqqWBozI',
            issuer: 'dev-p6i50wsqzzpg0biz.us.auth0.com',
            redirectUri: 'https://sudo-bailey.github.io/workitout/protected.html',
            scopes: ['openid', 'profile', 'email']
        });

        document.getElementById('login').addEventListener('click', () => {
            oktaAuth.signInWithRedirect();
        });

        document.getElementById('logout').addEventListener('click', () => {
            oktaAuth.signOut();
        });

        oktaAuth.tokenManager.get('idToken')
            .then(idToken => {
                if (idToken) {
                    document.getElementById('login').style.display = 'none';
                    document.getElementById('logout').style.display = 'block';
                }
            })
            .catch(err => {
                console.error(err);
            });
    </script>
</body>
</html>
